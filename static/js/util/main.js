$(document).ready(function(){var e;if("undefined"!=typeof csrfToken&&null!==csrfToken&&$.ajaxSetup({headers:{"X-CSRF-Token":csrfToken}}),e={monitorList:{},monitor:function(e,r){var n;return((n=this.monitorList)[e]||(n[e]=[])).push(r)},broadcast:function(e,r){var n,o,t,s,a=[];for(n=0,t=(o=this.monitorList[e]).length;n<t;++n)s=o[n],a.push(s(r));return a},fire:function(e,r){var n;switch(e){case"authpanel.on":case"authpanel.off":return n=document.querySelector("#auth-panel .cover-modal-wrapper"),helper.removeClass(n,"active"),helper.removeClass(n,"inactive"),helper.addClass(n,"authpanel.on"===e?"active":"inactive");case"signin":return this.broadcast("user",r),window.user=r,window.userkey=r.key,window;case"signout":return this.fire("loading.on"),this.broadcast("signout");case"signout.done":return this.broadcast("user",null),window.user=null,window.userkey=null,this.fire("loading.off");case"loading.on":return helper.addClass(document.body,"running");case"loading.off":return helper.removeClass(document.body,"running")}}},controller.register(nav,e)[0],controller.register(auth,e)[0],controller.register(modal,e),controller.register(profile,e)[0],e.broadcast("user",null),window.user)return e.broadcast("user",window.user)});